<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>í†µì¾Œí•œ ë„ì „ì„ ìœ„í•œ AI ì±—ë´‡</title>
    <style>
<style>
    body {
        font-family: 'Noto Sans KR', sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f0f0f0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
    }

    #login, #chat {
        background-color: #fff;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        padding: 30px;
        text-align: center;
        width: 400px;
        max-width: 90%;
    }

    #chat {
        display: none;
        height: 600px;
        display: flex;
        flex-direction: column; /* âœ¨ ì„¸ë¡œ ë°©í–¥ flexbox âœ¨ */
    }

    #login h3, #chat h3 {
        margin-top: 0;
        color: #333;
    }

    #login input, #chat input {
        padding: 10px;
        margin: 10px 0;
        border: 1px solid #ccc;
        border-radius: 5px;
        width: calc(100% - 22px);
        box-sizing: border-box;
    }

    #login button, #chat button {
        padding: 10px 20px;
        background-color: #4CAF50; /* ê¸°ë³¸ ë…¹ìƒ‰ ë²„íŠ¼ ìœ ì§€ (ë¡œê·¸ì¸ ë²„íŠ¼) */
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s ease;
    }

    #login button:hover, #chat button:hover {
        background-color: #45a049;
    }

    #messages {
        flex-grow: 1;
        padding: 20px;
        overflow-y: auto; /* âœ¨ ìŠ¤í¬ë¡¤ ìë™ ìƒì„± âœ¨ */
        display: flex;
        flex-direction: column;
        padding-bottom: 20px; /* âœ¨ messages ì˜ì—­ padding-bottom ì¶”ê°€ (ì…ë ¥ì°½ ê³µê°„ í™•ë³´) âœ¨ */
    }

    #messages div {
        margin-bottom: 10px;
        padding: 10px 15px;
        border-radius: 20px;
        background-color: #e0e0e0;
        word-wrap: break-word;
        max-width: 80%;
    }

    #messages div:nth-child(odd) {
        background-color: #DCF8C6;
        align-self: flex-end;
    }

    /* âœ¨ ì±„íŒ… ì…ë ¥ ì˜ì—­ ìŠ¤íƒ€ì¼ ì‹œì‘ âœ¨ */
    #chat > div:last-child { /* #chat div ì¤‘ ë§ˆì§€ë§‰ div (ì…ë ¥ ì˜ì—­) */
        display: flex; /* flexbox ë ˆì´ì•„ì›ƒ (ê°€ë¡œ ë°©í–¥) */
        margin-top: 20px; /* messages ì˜ì—­ê³¼ ê°„ê²© */
        padding: 10px; /* ë‚´ë¶€ ì—¬ë°± */
        border-top: 1px solid #ccc; /* ìœ„ìª½ í…Œë‘ë¦¬ */
    }

    #chat input {
        flex-grow: 1; /* ì…ë ¥ì°½ì´ ë‚¨ì€ ê³µê°„ ëª¨ë‘ ì°¨ì§€ */
        margin: 0;
        border: none; /* í…Œë‘ë¦¬ ì œê±° */
        border-radius: 20px; /* ë‘¥ê·¼ í…Œë‘ë¦¬ (ì–‘ìª½) */
        padding: 10px 15px;
        background-color: #f0f0f0; /* ì…ë ¥ì°½ ë°°ê²½ìƒ‰: ë°ì€ íšŒìƒ‰ */
    }

    #chat button {
        background-color: #2196F3; /* âœ¨ íŒŒë€ìƒ‰ ì „ì†¡ ë²„íŠ¼! âœ¨ */
        color: white;
        border: none;
        border-radius: 20px; /* âœ¨ ì–‘ìª½ ë‘¥ê·¼ í…Œë‘ë¦¬! âœ¨ */
        margin-left: 10px; /* ì…ë ¥ì°½ê³¼ ê°„ê²© */
        padding: 10px 20px;
    }

    #chat button:hover {
        background-color: #0b7dda; /* ë²„íŠ¼ hover ë°°ê²½ìƒ‰: ì‚´ì§ ì–´ë‘ìš´ íŒŒë€ìƒ‰ */
    }
    /* âœ¨ ì±„íŒ… ì…ë ¥ ì˜ì—­ ìŠ¤íƒ€ì¼ ë âœ¨ */


    /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ (ì„ íƒ ì‚¬í•­) */
    #messages::-webkit-scrollbar {
        width: 8px;
    }

    #messages::-webkit-scrollbar-thumb {
        background-color: #888;
        border-radius: 4px;
    }

    #messages::-webkit-scrollbar-thumb:hover {
        background-color: #555;
    }
</style>        #chat { display: none; } /* ì²˜ìŒì—” ì±„íŒ…ì°½ ìˆ¨ê¹€ */
    </style>
</head>
<body>
    <!-- ë¡œê·¸ì¸ í™”ë©´ -->
    <div id="login">
        <h3>ğŸ”’ êµìœ¡ìš© ì ‘ì† ì½”ë“œ</h3>
        <input type="password" id="code" placeholder="ë¹„ë°€ì½”ë“œ ì…ë ¥">
        <input type="text" id="name" placeholder="ì´ë¦„ ì…ë ¥">
        <button onclick="checkCode()">ì‹œì‘í•˜ê¸°</button>
    </div>

    <!-- ì±„íŒ… í™”ë©´ -->
    <div id="chat">
        <div id="messages"></div>
        <input type="text" id="input">
        <button onclick="send()">ì „ì†¡</button>
    </div>

    <script>
    // 1. ê¸°ë³¸ ì„¤ì •
    let userName = "";
    const SECRET_CODE = "tongdo123"; // ğŸ”‘ ë¹„ë°€ ì ‘ì† ì½”ë“œ (ì›í•˜ëŠ” ë¹„ë°€ë²ˆí˜¸ë¡œ ë³€ê²½í•˜ì„¸ìš”!)
    
    // 2. ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í•¨ìˆ˜ (login í™”ë©´)
    function checkCode() {
        const inputCode = document.getElementById('code').value;
        userName = document.getElementById('name').value;

        if(inputCode === SECRET_CODE && userName) {
            document.getElementById('login').style.display = 'none';
            document.getElementById('chat').style.display = 'block';
        } else {
            alert('âŒ ì˜ëª»ëœ ì½”ë“œ ë˜ëŠ” ì´ë¦„ì…ë‹ˆë‹¤!');
        }
    }

    // 3. ì±„íŒ… ê¸°ëŠ¥ (chat í™”ë©´) - send() í•¨ìˆ˜ëŠ” 5ë‹¨ê³„ì—ì„œ Gemini APIì— ë§ê²Œ ìˆ˜ì •!
    async function send() {
        const input = document.getElementById('input').value;
        const messagesDiv = document.getElementById('messages');

        // ğŸ‘¤ ì‚¬ìš©ì ë©”ì‹œì§€ í™”ë©´ì— í‘œì‹œ (ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼)
        messagesDiv.innerHTML += `<div>ğŸ‘¤ ${userName}: ${input}</div>`;

        // âœ… Cloudflare Worker URL (4ë‹¨ê³„ì—ì„œ ë³µì‚¬í•œ Worker ì£¼ì†Œë¡œ ë³€ê²½!) - ì´ì „ê³¼ ë™ì¼
        const workerUrl = 'https://tongdo-api.aelagth.workers.dev'; // ğŸ‘ˆğŸ‘ˆğŸ‘ˆ ì—¬ê¸°ì— ë³µì‚¬í•œ Worker URL ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!

        // ğŸ¤– AI ì‘ë‹µ ë°›ê¸° (Cloudflare Worker í˜¸ì¶œ) - Gemini API ìš”ì²­
        const response = await fetch(workerUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(input) // ğŸ‘ˆ ìš”ì²­ bodyì— ì‚¬ìš©ì ì…ë ¥ í…ìŠ¤íŠ¸ë§Œ ê·¸ëŒ€ë¡œ ì „ë‹¬ (Workerì—ì„œ Gemini API í˜•ì‹ìœ¼ë¡œ ë³€í™˜)
        });

        const data = await response.json(); // ì‘ë‹µ ë°ì´í„°ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        const aiResponse = data.candidates[0].content.parts[0].text; // ğŸ‘ˆ Gemini API ì‘ë‹µ êµ¬ì¡°ì— ë§ì¶° ì‘ë‹µ í…ìŠ¤íŠ¸ ì¶”ì¶œ

        // ğŸ¤– AI ì‘ë‹µ í™”ë©´ì— í‘œì‹œ
        messagesDiv.innerHTML += `<div>ğŸ¤– í†µë„AI: ${aiResponse}</div>`; // ğŸ‘ˆ AI ì´ë¦„ Gemini AIë¡œ ë³€ê²½
    
        document.getElementById('input').value = ''; // ë©”ì‹œì§€ ì…ë ¥ì°½ ì´ˆê¸°í™” (ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼)
    }
    </script>
</body>
</html>
