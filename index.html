<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>êµìœ¡ìš© AI ì±—ë´‡</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        #chat { display: none; } /* ì²˜ìŒì—” ì±„íŒ…ì°½ ìˆ¨ê¹€ */
    </style>
</head>
<body>
    <!-- ë¡œê·¸ì¸ í™”ë©´ -->
    <div id="login">
        <h3>ğŸ”’ êµìœ¡ìš© ì ‘ì† ì½”ë“œ</h3>
        <input type="password" id="code" placeholder="ë¹„ë°€ì½”ë“œ ì…ë ¥">
        <input type="text" id="name" placeholder="ì´ë¦„ ì…ë ¥">
        <button onclick="checkCode()">ì‹œì‘í•˜ê¸°</button>
    </div>

    <!-- ì±„íŒ… í™”ë©´ -->
    <div id="chat">
        <div id="messages"></div>
        <input type="text" id="input">
        <button onclick="send()">ì „ì†¡</button>
    </div>

    <script>
    // 1. ê¸°ë³¸ ì„¤ì •
    let userName = "";
    const SECRET_CODE = "hello123"; // ğŸ”‘ ë¹„ë°€ ì ‘ì† ì½”ë“œ (ì›í•˜ëŠ” ë¹„ë°€ë²ˆí˜¸ë¡œ ë³€ê²½í•˜ì„¸ìš”!)
    
    // 2. ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í•¨ìˆ˜ (login í™”ë©´)
    function checkCode() {
        const inputCode = document.getElementById('code').value;
        userName = document.getElementById('name').value;

        if(inputCode === SECRET_CODE && userName) {
            document.getElementById('login').style.display = 'none';
            document.getElementById('chat').style.display = 'block';
        } else {
            alert('âŒ ì˜ëª»ëœ ì½”ë“œ ë˜ëŠ” ì´ë¦„ì…ë‹ˆë‹¤!');
        }
    }

    // 3. ì±„íŒ… ê¸°ëŠ¥ (chat í™”ë©´) - send() í•¨ìˆ˜ëŠ” 5ë‹¨ê³„ì—ì„œ Gemini APIì— ë§ê²Œ ìˆ˜ì •!
    async function send() {
        const input = document.getElementById('input').value;
        const messagesDiv = document.getElementById('messages');

        // ğŸ‘¤ ì‚¬ìš©ì ë©”ì‹œì§€ í™”ë©´ì— í‘œì‹œ (ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼)
        messagesDiv.innerHTML += `<div>ğŸ‘¤ ${userName}: ${input}</div>`;

        // âœ… Cloudflare Worker URL (4ë‹¨ê³„ì—ì„œ ë³µì‚¬í•œ Worker ì£¼ì†Œë¡œ ë³€ê²½!) - ì´ì „ê³¼ ë™ì¼
        const workerUrl = 'https://tongdo-api.aelagth.workers.dev'; // ğŸ‘ˆğŸ‘ˆğŸ‘ˆ ì—¬ê¸°ì— ë³µì‚¬í•œ Worker URL ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!

        // ğŸ¤– AI ì‘ë‹µ ë°›ê¸° (Cloudflare Worker í˜¸ì¶œ) - Gemini API ìš”ì²­
        const response = await fetch(workerUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(input) // ğŸ‘ˆ ìš”ì²­ bodyì— ì‚¬ìš©ì ì…ë ¥ í…ìŠ¤íŠ¸ë§Œ ê·¸ëŒ€ë¡œ ì „ë‹¬ (Workerì—ì„œ Gemini API í˜•ì‹ìœ¼ë¡œ ë³€í™˜)
        });

        const data = await response.json(); // ì‘ë‹µ ë°ì´í„°ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        const aiResponse = data.candidates[0].content.parts[0].text; // ğŸ‘ˆ Gemini API ì‘ë‹µ êµ¬ì¡°ì— ë§ì¶° ì‘ë‹µ í…ìŠ¤íŠ¸ ì¶”ì¶œ

        // ğŸ¤– AI ì‘ë‹µ í™”ë©´ì— í‘œì‹œ
        messagesDiv.innerHTML += `<div>ğŸ¤– Gemini AI: ${aiResponse}</div>`; // ğŸ‘ˆ AI ì´ë¦„ Gemini AIë¡œ ë³€ê²½
    
        document.getElementById('input').value = ''; // ë©”ì‹œì§€ ì…ë ¥ì°½ ì´ˆê¸°í™” (ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼)
    }
    </script>
</body>
</html>
