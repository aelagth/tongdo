<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>í†µì¾Œí•œ ë„ì „ì„ ìœ„í•œ AI ì±—ë´‡</title>
    <style>
        body {
        font-family: 'Noto Sans KR', sans-serif; /* âœ¨ ì˜ˆìœ í°íŠ¸! (Noto Sans Korean) âœ¨ */
        margin: 0; /* body ê¸°ë³¸ margin ì œê±° */
        padding: 0; /* body ê¸°ë³¸ padding ì œê±° */
        background-color: #f0f0f0; /* ì „ì²´ ë°°ê²½ìƒ‰: ë°ì€ íšŒìƒ‰ */
        display: flex; /* flexbox ë ˆì´ì•„ì›ƒ ì‚¬ìš© */
        justify-content: center; /* ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */
        align-items: center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
        min-height: 100vh; /* ìµœì†Œ ë†’ì´: ë·°í¬íŠ¸ ë†’ì´ (í™”ë©´ ì „ì²´ ì±„ìš°ê¸°) */
        }

    #login, #chat {
        background-color: #fff; /* ë¡œê·¸ì¸/ì±„íŒ…ì°½ ë°°ê²½ìƒ‰: í°ìƒ‰ */
        border-radius: 15px; /* ë‘¥ê·¼ í…Œë‘ë¦¬ */
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); /* ê·¸ë¦¼ì íš¨ê³¼ */
        padding: 30px; /* ë‚´ë¶€ ì—¬ë°± */
        text-align: center; /* í…ìŠ¤íŠ¸ ì¤‘ì•™ ì •ë ¬ */
        width: 400px; /* ì ë‹¹í•œ ë„ˆë¹„ */
        max-width: 90%; /* ìµœëŒ€ ë„ˆë¹„: í™”ë©´ ë„ˆë¹„ì˜ 90% (ë°˜ì‘í˜•) */
    }

    #chat {
        display: none; /* ì±„íŒ…ì°½ ìˆ¨ê¹€ (ê¸°ë³¸) */
        height: 600px; /* ì±„íŒ…ì°½ ë†’ì´ */
        display: flex; /* flexbox ë ˆì´ì•„ì›ƒ (ì„¸ë¡œ ë°©í–¥) */
        flex-direction: column; /* ìš”ì†Œ ì„¸ë¡œë¡œ ë°°ì¹˜ */
    }

    #login h3, #chat h3 {
        margin-top: 0; /* ì œëª© margin-top ì œê±° */
        color: #333; /* ì œëª© ê¸€ììƒ‰: ì§„í•œ íšŒìƒ‰ */
    }

    #login input, #chat input {
        padding: 10px; /* ì…ë ¥ì°½ ë‚´ë¶€ ì—¬ë°± */
        margin: 10px 0; /* ì…ë ¥ì°½ ìƒí•˜ margin */
        border: 1px solid #ccc; /* ì…ë ¥ì°½ í…Œë‘ë¦¬ */
        border-radius: 5px; /* ì…ë ¥ì°½ ë‘¥ê·¼ í…Œë‘ë¦¬ */
        width: calc(100% - 22px); /* ì…ë ¥ì°½ ë„ˆë¹„ (padding, border ê³ ë ¤) */
        box-sizing: border-box; /* box-sizing: border-box (padding, borderê°€ widthì— í¬í•¨ë˜ë„ë¡) */
    }

    #login button, #chat button {
        padding: 10px 20px; /* ë²„íŠ¼ ë‚´ë¶€ ì—¬ë°± */
        background-color: #4CAF50; /* ë²„íŠ¼ ë°°ê²½ìƒ‰: ë…¹ìƒ‰ */
        color: white; /* ë²„íŠ¼ ê¸€ììƒ‰: í°ìƒ‰ */
        border: none; /* ë²„íŠ¼ í…Œë‘ë¦¬ ì œê±° */
        border-radius: 5px; /* ë²„íŠ¼ ë‘¥ê·¼ í…Œë‘ë¦¬ */
        cursor: pointer; /* ë§ˆìš°ìŠ¤ ì»¤ì„œ: ì†ê°€ë½ ëª¨ì–‘ */
        font-size: 16px; /* ë²„íŠ¼ ê¸€ì í¬ê¸° */
        transition: background-color 0.3s ease; /* ë°°ê²½ìƒ‰ ë³€ê²½ ì• ë‹ˆë©”ì´ì…˜ */
    }

    #login button:hover, #chat button:hover {
        background-color: #45a049; /* ë²„íŠ¼ hover ë°°ê²½ìƒ‰: ì‚´ì§ ì–´ë‘ìš´ ë…¹ìƒ‰ */
    }

    #messages {
        flex-grow: 1; /* messages ì˜ì—­ì´ ë‚¨ì€ ê³µê°„ ëª¨ë‘ ì°¨ì§€ */
        padding: 20px; /* ë©”ì‹œì§€ ì˜ì—­ ë‚´ë¶€ ì—¬ë°± */
        overflow-y: auto; /* ì„¸ë¡œ ìŠ¤í¬ë¡¤ ìë™ ìƒì„± (ë©”ì‹œì§€ ë„˜ì¹  ë•Œ) */
        display: flex; /* flexbox ë ˆì´ì•„ì›ƒ (ì„¸ë¡œ ë°©í–¥) */
        flex-direction: column; /* ìš”ì†Œ ì„¸ë¡œë¡œ ë°°ì¹˜ */
    }

    #messages div {
        margin-bottom: 10px; /* ë©”ì‹œì§€ ê°„ ê°„ê²© */
        padding: 10px 15px; /* ë©”ì‹œì§€ ë²„ë¸” ë‚´ë¶€ ì—¬ë°± */
        border-radius: 20px; /* ë©”ì‹œì§€ ë²„ë¸” ë‘¥ê·¼ í…Œë‘ë¦¬ */
        background-color: #e0e0e0; /* ê¸°ë³¸ ë©”ì‹œì§€ ë²„ë¸” ë°°ê²½ìƒ‰: ë°ì€ íšŒìƒ‰ */
        word-wrap: break-word; /* ê¸´ ë‹¨ì–´ ì¤„ë°”ê¿ˆ */
        max-width: 80%; /* ë©”ì‹œì§€ ë²„ë¸” ìµœëŒ€ ë„ˆë¹„ */
    }

    #messages div:nth-child(odd) { /* í™€ìˆ˜ ë²ˆì§¸ ë©”ì‹œì§€ (ì‚¬ìš©ì ë©”ì‹œì§€) */
        background-color: #DCF8C6; /* ì‚¬ìš©ì ë©”ì‹œì§€ ë²„ë¸” ë°°ê²½ìƒ‰: ì—°í•œ ë…¹ìƒ‰ */
        align-self: flex-end; /* ì‚¬ìš©ì ë©”ì‹œì§€ ì˜¤ë¥¸ìª½ ì •ë ¬ */
    }

    #chat input {
        margin: 0; /* ì±„íŒ… ì…ë ¥ì°½ margin ì œê±° */
        border-radius: 0; /* ì±„íŒ… ì…ë ¥ì°½ í…Œë‘ë¦¬ ë‘¥ê¸€ê¸° ì œê±° */
        border-top: 1px solid #ccc; /* ì±„íŒ… ì…ë ¥ì°½ ìœ„ìª½ í…Œë‘ë¦¬ë§Œ */
        border-right: none; /* ì±„íŒ… ì…ë ¥ì°½ ì˜¤ë¥¸ìª½ í…Œë‘ë¦¬ ì œê±° */
        border-left: none; /* ì±„íŒ… ì…ë ¥ì°½ ì™¼ìª½ í…Œë‘ë¦¬ ì œê±° */
    }

    #chat button {
        border-radius: 0; /* ì±„íŒ… ì „ì†¡ ë²„íŠ¼ í…Œë‘ë¦¬ ë‘¥ê¸€ê¸° ì œê±° */
        border-bottom-right-radius: 15px; /* ì±„íŒ… ì „ì†¡ ë²„íŠ¼ ì˜¤ë¥¸ìª½ ì•„ë˜ í…Œë‘ë¦¬ë§Œ ë‘¥ê¸€ê²Œ (ì±„íŒ…ì°½ê³¼ ë§ì¶°ì„œ) */
        border-top-right-radius: 15px; /* ì±„íŒ… ì „ì†¡ ë²„íŠ¼ ì˜¤ë¥¸ìª½ ìœ„ í…Œë‘ë¦¬ë§Œ ë‘¥ê¸€ê²Œ (ì±„íŒ…ì°½ê³¼ ë§ì¶°ì„œ) */
    }

    /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ (ì„ íƒ ì‚¬í•­, Chrome, Edge, Safari ë“± Webkit ê¸°ë°˜ ë¸Œë¼ìš°ì €) */
    #messages::-webkit-scrollbar {
        width: 8px; /* ìŠ¤í¬ë¡¤ë°” ë„ˆë¹„ */
    }

    #messages::-webkit-scrollbar-thumb {
        background-color: #888; /* ìŠ¤í¬ë¡¤ë°” ìƒ‰ìƒ */
        border-radius: 4px; /* ìŠ¤í¬ë¡¤ë°” ë‘¥ê·¼ í…Œë‘ë¦¬ */
    }

    #messages::-webkit-scrollbar-thumb:hover {
        background-color: #555; /* ìŠ¤í¬ë¡¤ë°” hover ìƒ‰ìƒ */
    }
        #chat { display: none; } /* ì²˜ìŒì—” ì±„íŒ…ì°½ ìˆ¨ê¹€ */
    </style>
</head>
<body>
    <!-- ë¡œê·¸ì¸ í™”ë©´ -->
    <div id="login">
        <h3>ğŸ”’ êµìœ¡ìš© ì ‘ì† ì½”ë“œ</h3>
        <input type="password" id="code" placeholder="ë¹„ë°€ì½”ë“œ ì…ë ¥">
        <input type="text" id="name" placeholder="ì´ë¦„ ì…ë ¥">
        <button onclick="checkCode()">ì‹œì‘í•˜ê¸°</button>
    </div>

    <!-- ì±„íŒ… í™”ë©´ -->
    <div id="chat">
        <div id="messages"></div>
        <input type="text" id="input">
        <button onclick="send()">ì „ì†¡</button>
    </div>

    <script>
    // 1. ê¸°ë³¸ ì„¤ì •
    let userName = "";
    const SECRET_CODE = "tongdo123"; // ğŸ”‘ ë¹„ë°€ ì ‘ì† ì½”ë“œ (ì›í•˜ëŠ” ë¹„ë°€ë²ˆí˜¸ë¡œ ë³€ê²½í•˜ì„¸ìš”!)
    
    // 2. ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í•¨ìˆ˜ (login í™”ë©´)
    function checkCode() {
        const inputCode = document.getElementById('code').value;
        userName = document.getElementById('name').value;

        if(inputCode === SECRET_CODE && userName) {
            document.getElementById('login').style.display = 'none';
            document.getElementById('chat').style.display = 'block';
        } else {
            alert('âŒ ì˜ëª»ëœ ì½”ë“œ ë˜ëŠ” ì´ë¦„ì…ë‹ˆë‹¤!');
        }
    }

    // 3. ì±„íŒ… ê¸°ëŠ¥ (chat í™”ë©´) - send() í•¨ìˆ˜ëŠ” 5ë‹¨ê³„ì—ì„œ Gemini APIì— ë§ê²Œ ìˆ˜ì •!
    async function send() {
        const input = document.getElementById('input').value;
        const messagesDiv = document.getElementById('messages');

        // ğŸ‘¤ ì‚¬ìš©ì ë©”ì‹œì§€ í™”ë©´ì— í‘œì‹œ (ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼)
        messagesDiv.innerHTML += `<div>ğŸ‘¤ ${userName}: ${input}</div>`;

        // âœ… Cloudflare Worker URL (4ë‹¨ê³„ì—ì„œ ë³µì‚¬í•œ Worker ì£¼ì†Œë¡œ ë³€ê²½!) - ì´ì „ê³¼ ë™ì¼
        const workerUrl = 'https://tongdo-api.aelagth.workers.dev'; // ğŸ‘ˆğŸ‘ˆğŸ‘ˆ ì—¬ê¸°ì— ë³µì‚¬í•œ Worker URL ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!

        // ğŸ¤– AI ì‘ë‹µ ë°›ê¸° (Cloudflare Worker í˜¸ì¶œ) - Gemini API ìš”ì²­
        const response = await fetch(workerUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(input) // ğŸ‘ˆ ìš”ì²­ bodyì— ì‚¬ìš©ì ì…ë ¥ í…ìŠ¤íŠ¸ë§Œ ê·¸ëŒ€ë¡œ ì „ë‹¬ (Workerì—ì„œ Gemini API í˜•ì‹ìœ¼ë¡œ ë³€í™˜)
        });

        const data = await response.json(); // ì‘ë‹µ ë°ì´í„°ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        const aiResponse = data.candidates[0].content.parts[0].text; // ğŸ‘ˆ Gemini API ì‘ë‹µ êµ¬ì¡°ì— ë§ì¶° ì‘ë‹µ í…ìŠ¤íŠ¸ ì¶”ì¶œ

        // ğŸ¤– AI ì‘ë‹µ í™”ë©´ì— í‘œì‹œ
        messagesDiv.innerHTML += `<div>ğŸ¤– í†µë„AI: ${aiResponse}</div>`; // ğŸ‘ˆ AI ì´ë¦„ Gemini AIë¡œ ë³€ê²½
    
        document.getElementById('input').value = ''; // ë©”ì‹œì§€ ì…ë ¥ì°½ ì´ˆê¸°í™” (ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼)
    }
    </script>
</body>
</html>
